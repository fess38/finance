<div class="row">
  <div class="col-xs-12 col-md-12 col-lg-6">
    <table class="table table-noborder table-compact">
      <tr>
        <th (click)="stopEdit(); isEditing=true">
          <span>Счет</span>
          <i class="fa fa-plus-circle" aria-hidden="true"></i>
        </th>
        <th>Баланс</th>
      </tr>
      <tr *ngFor="let account of accounts" (click)="startEdit(account)">
        <td>{{account.name}}</td>
        <td>{{account.balance || 0}} {{currencySymbol(account.currencyId)}}</td>
      </tr>
    </table>
  </div>
</div>

<clr-modal [(clrModalOpen)]="isEditing" [clrModalClosable]="true" [clrModalSize]="'md'">
  <h3 class="modal-title" [hidden]="!isAccountAdding()">Добавить счет</h3>
  <h3 class="modal-title" [hidden]="isAccountAdding()">Редактировать счет</h3>
  <div class="modal-body">
    <alert></alert>
    <form #accountForm="ngForm" (ngSubmit)="save(newAccount)">
      <section class="form-block">
        <div class="form-group">
          <label for="name"
                 role="tooltip"
                 class="tooltip tooltip-validation"
                 [class.invalid]="name.invalid && (name.dirty || name.touched)">
            <input type="text"
                   id="name"
                   required
                   name="name"
                   [(ngModel)]="newAccount.name"
                   (blur)="update(newAccount)"
                   #name="ngModel"
                   placeholder="Название">
          </label>

          <div class="select" [hidden]="!isAccountAdding()">
            <select name="currency" [(ngModel)]="newAccount.currencyId" required title="Валюта">
              <option *ngFor="let currency of currencies" [ngValue]="currency.id">
                {{currency.nameRu}} ({{currency.symbol}})
              </option>
            </select>
          </div>
        </div>
      </section>
    </form>
  </div>
  <div class="modal-footer">
    <button type="submit"
            class="btn btn-primary btn-sm"
            (click)="save(newAccount)"
            [disabled]="!accountForm.form.valid"
            [hidden]="!isAccountAdding()">Сохранить
    </button>
    <button type="submit"
            class="btn btn-danger btn-sm"
            (click)="delete(newAccount)"
            [disabled]="hasTransactions(newAccount)"
            [hidden]="isAccountAdding()">Удалить
    </button>
  </div>
</clr-modal>

