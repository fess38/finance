<div>
  <alert></alert>
  <h4 [hidden]="!isNewSubCategory()">Добавление подкатегории</h4>
  <h4 [hidden]="isNewSubCategory()">Редактирование подкатегории</h4>
  <form #subCategoryForm="ngForm">
    <section class="form-block">
      <div class="form-group">
        <label for="name"
               role="tooltip"
               class="tooltip tooltip-validation"
               [class.invalid]="name.invalid && (name.dirty || name.touched)">
          <input type="text"
                 id="name"
                 required
                 name="name"
                 [(ngModel)]="subCategory.name"
                 #name="ngModel"
                 placeholder="Название">
        </label>
        <div class="select">
          <select name="category"
                  [(ngModel)]="subCategory.categoryId"
                  required
                  title="Категория"
                  [disabled]="!isNewSubCategory()">
            <option disabled>Категория</option>
            <option selected *ngFor="let category of categories()" [ngValue]="category.id">
              {{category.name}}
            </option>
          </select>
          <clr-checkbox name="isVisible"
                        [(ngModel)]="subCategory.isVisible"
                        [hidden]="isNewSubCategory()">
            Использовать в новых транзакциях
          </clr-checkbox>
        </div>
      </div>
      <div [hidden]="isNewSubCategory()">
        <span>Транзакций: {{subCategory.transactionAmount}}</span>
      </div>
    </section>
  </form>
  <button type="submit"
          class="btn btn-primary btn-sm"
          (click)="update(subCategory)"
          [disabled]="!subCategoryForm.form.valid || !hasCategory()">Сохранить
  </button>
  <button type="submit"
          class="btn btn-danger btn-sm"
          (click)="delete(subCategory)"
          [hidden]="isNewSubCategory()"
          [disabled]="hasTransations()">Удалить
  </button>
</div>
