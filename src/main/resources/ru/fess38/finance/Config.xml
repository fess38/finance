<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans.xsd">

  <import resource="classpath*:ru/fess38/finance/Dao.xml" />

  <bean id="root" class="ru.fess38.finance.view.ViewFactory" factory-method="mainWindow" />
  <bean id="transactionAdderWindow" class="ru.fess38.finance.view.ViewFactory" factory-method="transactionAdderWindow" />
  <bean id="transferAdderWindow" class="ru.fess38.finance.view.ViewFactory" factory-method="transferAdderWindow" />

  <bean id="abstractController" class="ru.fess38.finance.controller.AbstractController" abstract="true"
    init-method="init">
    <property name="rubricDao" ref="rubricDao" />
    <property name="accountDao" ref="accountDao" />
    <property name="userDao" ref="userDao" />
    <property name="transactionGroupDao" ref="transactionGroupDao" />
    <property name="transactionDao" ref="transactionDao" />
    <property name="currencyDao" ref="currencyDao" />
  </bean>

  <bean id="transactionAdderController" class="ru.fess38.finance.controller.TransactionAdderController" parent="abstractController">
    <constructor-arg name="form" ref="transactionAdderWindow" />
    <property name="transactionWindowController" ref="transactionWindowController" />
  </bean>

  <bean id="transferAdderController" class="ru.fess38.finance.controller.TransferAdderController" parent="abstractController">
    <constructor-arg name="form" ref="transferAdderWindow" />
  </bean>

  <bean id="transactionWindowController" class="ru.fess38.finance.controller.TransactionWindowController" parent="abstractController">
    <constructor-arg name="mainWindow" ref="root" />
    <property name="transactionEditorController" ref="transactionEditorController" />
  </bean>
  
  <bean id="transactionEditorController" class="ru.fess38.finance.controller.TransactionEditorController" parent="abstractController">
    <property name="transactionWindowController" ref="transactionWindowController" />
  </bean>

  <bean id="rootController" class="ru.fess38.finance.controller.MainWindowController" parent="abstractController">
    <constructor-arg name="mainWindow" ref="root" />
    <property name="transactionAdderController" ref="transactionAdderController" />
    <property name="transferAdderController" ref="transferAdderController" />
    <property name="transactionWindowController" ref="transactionWindowController" />
  </bean>
</beans>
