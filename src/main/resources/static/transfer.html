<div ng-controller="transfer">
  <button ng-click="previousMonth()">Предыдущий месяц</button>
  <button ng-click="nextMonth()">Следующий месяц</button>
  <br><br>
  <table>
    <tr>
      <th>Дата</th>
      <th>Списать со счета</th>
      <th>Пополнить счет</th>
      <th>Сумма списания</th>
      <th>Сумма пополнения</th>
      <th>Комментарий</th>
      <th></th>
    </tr>
    <tr>
      <td>
        <input uib-datepicker-popup="d MMM yyyy" ng-model="newTransfer.dayRef" is-open="calendar.opened"
            ng-click="calendar.open()" form="saveTransfer" readonly required datepicker-options="calendar.options"
            show-button-bar="false"/>
      </td>
      <td>
        <select ng-model="newTransfer.accountFrom" ng-change="checkEquals()" form="saveTransfer"
            ng-options="account as account.name for account in accounts | orderBy:'name' | filter:{type:'!OUTER'}
                  track by account.id">
        </select>
      </td>
      <td>
        <select ng-model="newTransfer.accountTo" ng-change="checkEquals()" form="saveTransfer"
            ng-options="account as account.name for account in accounts | orderBy:'name' | filter:{type:'!OUTER'}
                  track by account.id">
        </select>
      </td>
      <td>
        <input ng-model="newTransfer.amountFrom" type="number" min="1" required form="saveTransfer">
      </td>
      <td><input ng-model="newTransfer.amountTo" type="number" min="1" required form="saveTransfer">
      </td>
      <td><input ng-model="newTransfer.comment" type="text" size="25" form="saveTransfer"></td>
      <td><input type="submit" value="Добавить" form="saveTransfer"></td>
    </tr>
    <tr ng-repeat="t in transfers | orderBy:'dayRef':true">
      <td>{{t.dayRef | date:"d MMM yyyy"}}</td>
      <td>{{t.accountFrom.name}}({{t.accountFrom.currency.symbol}})</td>
      <td>{{t.accountTo.name}}({{t.accountTo.currency.symbol}})</td>
      <td>
        <input ng-model="t.amountFrom" type="number" min="1" required ng-blur="updateTransfer(t)">
      </td>
      <td>
        <input ng-model="t.amountTo" type="number" min="1" required ng-blur="updateTransfer(t)">
      </td>
      <td>
        <input ng-model="t.comment" type="text" size="25" ng-blur="updateTransfer(t)">
      </td>
      <td>
        <input type="submit" value="Удалить" ng-click="deleteTransfer(t)">
      </td>
    </tr>
  </table>
  <form ng-submit="saveTransfer()" id="saveTransfer"></form>
  <div ng-show="alert.show" class="{{alert.type}}">{{alert.msg}}</div>
</div>
